!function(e,n){"function"==typeof define&&define.amd?define(["lodash"],n):"object"==typeof exports?module.exports=n(require("lodash").runInContext()):e._.mixin(n(e._))}(this,function(e,n){"use strict";function t(n){if(e.isArray(n))return n;if(!e.isString(n))return[];var t=!1,r=[],u="",i=n.length,a="",c=0;e:for(;i>c;c++){if(a=n.charAt(c),!t)switch(a){case"\\":t=!0;continue e;case"]":if(i>c+1&&"."!==n.charAt(c+1))throw new SyntaxError('expected a "." to follow the "]" at '+c+" in path "+n);continue e;case"[":case".":r.push(u),u="";continue e}u+=a,t=!1}return""===r[0]&&r.splice(0,1),r.push(u),r}var r={deepIn:function(n,r){for(var u=t(r),i=0;i<u.length;i++){var a=u[i];if(!(e.isObject(n)&&a in n))return!1;n=n[a]}return!0},deepHas:function(n,r){for(var u=t(r),i=0;i<u.length;i++){var a=u[i];if(!e.isObject(n)||!n.hasOwnProperty(a))return!1;n=n[a]}return!0},deepGet:function(r,u){var i=t(u);return e.deepIn(r,i)?e.reduce(i,function(e,n){return e[n]},r):n},deepOwn:function(r,u){var i=t(u);return e.deepHas(r,i)?e.reduce(i,function(e,n){return e[n]},r):n},deepSet:function(n,r,u){var i=t(r),a=n;return e.forEach(i,function(n,t){t+1===i.length?a[n]=u:e.isObject(a[n])||(a[n]=i[t+1]%1===0?[]:{}),a=a[n]}),n},deepPluck:function(n,t){return e.map(n,function(n){return e.deepGet(n,t)})},deepCall:function(n,t,r){var u=Array.prototype.slice.call(arguments,3);return e.deepApply(n,t,r,u)},deepApply:function(t,r,u,i){var a=e.deepGet(t,r);return e.isFunction(a)?a.apply(u,i):n},deepEscapePropertyName:function(e){return e.replace(/\\/g,"\\\\").replace(/\./g,"\\.")},deepMapValues:function(n,r,u){var i=t(u);return!e.isObject(n)||e.isDate(n)||e.isRegExp(n)?r(n,i):e.extend(n,e.mapValues(n,function(n,t){return e.deepMapValues(n,r,e.flatten([i,t]))}))}};return e.mixin(r),r});